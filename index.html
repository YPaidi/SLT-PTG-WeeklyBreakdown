<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weekly Breakdown of SLT and PTG</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
        table-layout: fixed; /* Ensure all columns have equal width */
    }

    table, th, td {
        border: 1px solid black;
    }

    th, td {
        padding: 5px;
        text-align: center;
        word-wrap: break-word; /* Ensure content wraps if it exceeds column width */
    }

    .center {
        text-align: center;
    }

    .submit-btn {
        background-color: #4CAF50;
        color: white;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        font-size: 16px;
    }

    .submit-btn:hover {
        background-color: #45a049;
    }

    .totals {
        font-size: 18px;
        font-weight: bold;
        margin-top: 20px;
    }

    .summary-card {
        border: 1px solid #ccc;
        border-radius: 10px;
        padding: 20px;
        margin: 20px 0;
        background-color: #f9f9f9;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .summary-title {
        font-size: 20px;
        font-weight: bold;
        margin-bottom: 10px;
        color: #333;
    }

    .summary-content {
        font-size: 16px;
        line-height: 1.6;
        color: #555;
    }

    .wide-input {
        width: 500px;
    }

    input[type="number"] {
        width: 60px;
        padding: 5px;
        font-size: 14px;
    }

    @media (max-width: 768px) {
        table, thead, tbody, th, td, tr {
            display: block;
        }

        thead tr {
            position: absolute;
            top: -9999px;
            left: -9999px;
        }

        tr {
            margin-bottom: 1rem;
        }

        td {
            position: relative;
            padding-left: 50%;
        }

        td:before {
            position: absolute;
            top: 0;
            left: 10px;
            width: 45%;
            padding-right: 10px;
            white-space: nowrap;
        }

        td:nth-of-type(1):before { content: "Week"; }
        td:nth-of-type(2):before { content: "Materials (Physical)"; }
        td:nth-of-type(3):before { content: "Materials (Online)"; }
        td:nth-of-type(4):before { content: "Activities (Physical)"; }
        td:nth-of-type(5):before { content: "Activities (Online)"; }
        td:nth-of-type(6):before { content: "Assessment (Physical)"; }
        td:nth-of-type(7):before { content: "Assessment (Online)"; }
    }

/* Style for "Activity Type" label in Physical columns */
td:nth-child(2) .label-activity,
td:nth-child(4) .label-activity,
td:nth-child(6) .label-activity {
    color: blue; /* Blue text for Physical columns */
    font-weight: bold; /* Optional: Make the text bold */
}

/* Style for "Activity Type" label in Online columns */
td:nth-child(3) .label-activity,
td:nth-child(5) .label-activity,
td:nth-child(7) .label-activity {
    color: maroon; /* Pink text for Online columns */
    font-weight: bold; /* Optional: Make the text bold */
}

/* Style for Activity Type input in Physical columns */
td:nth-child(2) .activity-type-input,
td:nth-child(4) .activity-type-input,
td:nth-child(6) .activity-type-input {
    background-color: #ADD8E6; /* Baby blue */
    color: blue; /* Blue text for inputs */
    border: none; /* Remove borders */
    padding: 5px; /* Add padding for spacing */
    border-radius: 4px; /* Rounded corners for better appearance */
    width: 90%; /* Adjust width */
}

/* Style for Activity Type input in Online columns */
td:nth-child(3) .activity-type-input,
td:nth-child(5) .activity-type-input,
td:nth-child(7) .activity-type-input {
    background-color: #FFB6C1; /* Soft pink */
    color: maroon; /* Maroon text for inputs */
    border: none; /* Remove borders */
    padding: 5px; /* Add padding for spacing */
    border-radius: 4px; /* Rounded corners for better appearance */
    width: 90%; /* Adjust width */
}

/* Placeholder styling for all inputs */
.activity-type-input::placeholder {
    color: gray; /* Set placeholder color */
}

</style>
</head>
<body>

    <h1>Weekly Breakdown of SLT and PTG</h1>

    <form id="slt-ptg-form">
        <div>
            <label for="course-info">Course Code and Title:</label>
            <input type="text" id="course-info" name="course-info" placeholder="Enter course code and title" class="wide-input" required>
        </div>
        <br>
        <table>
            <thead>
                <tr>
                    <th rowspan="2">Week</th>
                    <th colspan="2">Learning Materials</th>
                    <th colspan="2">Learning Activities</th>
                    <th colspan="2">Assessment</th>
                </tr>
                <tr>
                    <th>Physical<br><span style='font-size: 0.8em; font-style: italic; color: gray;'>e.g., Classroom Lecture</span></th>
                    <th>Online (PTG)<br><span style='font-size: 0.8em; font-style: italic; color: gray;'>e.g., Online Lectures using Google Meet, Recorded Lecture, YouTube</span></th>
                    <th>Physical<br><span style='font-size: 0.8em; font-style: italic; color: gray;'>e.g., Group Discussion</span></th>
                    <th>Online (PTG)<br><span style='font-size: 0.8em; font-style: italic; color: gray;'>e.g., Spectrum, Google Workspace, Padlet, Kahoot!, Canva</span></th>
                    <th>Physical<br><span style='font-size: 0.8em; font-style: italic; color: gray;'>e.g., In-Class Test</span></th>
                    <th>Online (PTG)<br><span style='font-size: 0.8em; font-style: italic; color: gray;'>e.g., Online Quiz, Recorded Presentation</span></th>
                </tr>
            </thead>
            <tbody id="week-rows">
                <!-- Week rows will be dynamically inserted here -->
                <tr>
                    <td class="center">Exam Week</td>
                    <td>
                        <label>Delivery:</label>
                        <input type="number" name="examweek_assessment_onsite_delivery" placeholder="Hours">
                        <br>
                        <label>Preparation:</label>
                        <input type="number" name="examweek_assessment_onsite_preparation" placeholder="Hours">
                    </td>
                </tr>
            </tbody>
        </table>

        <button type="submit" class="submit-btn">Submit</button>
    </form>

    <h2>Summary</h2>
    <table id="summary-table">
        <thead>
            <tr>
                <th>Category</th>
                <th>Physical</th>
                <th>Online (PTG)</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Learning Materials</td>
                <td id="onsite-materials">0</td>
                <td id="online-materials">0</td>
                <td id="total-materials">0</td>
            </tr>
            <tr>
                <td>Learning Activities</td>
                <td id="onsite-activities">0</td>
                <td id="online-activities">0</td>
                <td id="total-activities">0</td>
            </tr>
            <tr>
                <td>Assessments</td>
                <td id="onsite-assessments">0</td>
                <td id="online-assessments">0</td>
                <td id="total-assessments">0</td>
            </tr>
        </tbody>
    </table>

    <div id="totals" class="totals"></div>

    <script>
        // Dynamically add rows for weeks 1 to 14
        const weekRows = document.getElementById('week-rows');
        for (let week = 1; week <= 14; week++) {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td class="center">Week ${week}</td>
                <td>
                    <label class="label-small label-activity">Activity Type:</label>
                    <input type="text" name="week${week}_materials_onsite_type" class="activity-type-input" placeholder="Type of activity">
                    <br>
                    <label>Delivery:</label>
                    <input type="number" name="week${week}_materials_onsite_delivery" placeholder="Hours">
                    <br>
                    <label>Preparation:</label>
                    <input type="number" name="week${week}_materials_onsite_preparation" placeholder="Hours">
                </td>
                <td>
                    <label class="label-small label-activity">Activity Type:</label>
                    <input type="text" name="week${week}_materials_onsite_type" class="activity-type-input" placeholder="Type of activity">
                    <br>
                    <label>Delivery:</label>
                    <input type="number" name="week${week}_materials_online_delivery" placeholder="Hours">
                    <br>
                    <label>Preparation:</label>
                    <input type="number" name="week${week}_materials_online_preparation" placeholder="Hours">
                </td>
                <td>
                    <label class="label-small label-activity">Activity Type:</label>
                    <input type="text" name="week${week}_materials_onsite_type" class="activity-type-input" placeholder="Type of activity">
                    <br>
                    <label>Delivery:</label>
                    <input type="number" name="week${week}_activities_onsite_delivery" placeholder="Hours">
                    <br>
                    <label>Preparation:</label>
                    <input type="number" name="week${week}_activities_onsite_preparation" placeholder="Hours">
                </td>
                <td>
                    <label class="label-small label-activity">Activity Type:</label>
                    <input type="text" name="week${week}_materials_onsite_type" class="activity-type-input" placeholder="Type of activity">
                    <br>
                    <label>Delivery:</label>
                    <input type="number" name="week${week}_activities_online_delivery" placeholder="Hours">
                    <br>
                    <label>Preparation:</label>
                    <input type="number" name="week${week}_activities_online_preparation" placeholder="Hours">
                </td>
                <td>
                    <label class="label-small label-activity">Activity Type:</label>
                    <input type="text" name="week${week}_materials_onsite_type" class="activity-type-input" placeholder="Type of activity">
                    <br>
                    <label>Delivery:</label>
                    <input type="number" name="week${week}_assessment_onsite_delivery" placeholder="Hours">
                    <br>
                    <label>Preparation:</label>
                    <input type="number" name="week${week}_assessment_onsite_preparation" placeholder="Hours">
                </td>
                <td>
                    <label class="label-small label-activity">Activity Type:</label>
                    <input type="text" name="week${week}_materials_onsite_type" class="activity-type-input" placeholder="Type of activity">
                    <br>
                    <label>Delivery:</label>
                    <input type="number" name="week${week}_assessment_online_delivery" placeholder="Hours">
                    <br>
                    <label>Preparation:</label>
                    <input type="number" name="week${week}_assessment_online_preparation" placeholder="Hours">
                </td>
            `;
            weekRows.insertBefore(row, weekRows.lastElementChild);
        }
        document.getElementById('slt-ptg-form').addEventListener('submit', function(event) {
            event.preventDefault();

            const formData = new FormData(event.target);

            let onsiteMaterials = 0, onsiteActivities = 0, onsiteAssessments = 0;
            let onlineMaterials = 0, onlineActivities = 0, onlineAssessments = 0;

            // Loop through weeks and calculate totals
            for (let week = 1; week <= 14; week++) {
                const weekKey = `week${week}`;

                onsiteMaterials += parseInt(formData.get(`${weekKey}_materials_onsite_delivery`) || 0) +
                                   parseInt(formData.get(`${weekKey}_materials_onsite_preparation`) || 0);
                onlineMaterials += parseInt(formData.get(`${weekKey}_materials_online_delivery`) || 0) +
                                   parseInt(formData.get(`${weekKey}_materials_online_preparation`) || 0);

                onsiteActivities += parseInt(formData.get(`${weekKey}_activities_onsite_delivery`) || 0) +
                                    parseInt(formData.get(`${weekKey}_activities_onsite_preparation`) || 0);
                onlineActivities += parseInt(formData.get(`${weekKey}_activities_online_delivery`) || 0) +
                                    parseInt(formData.get(`${weekKey}_activities_online_preparation`) || 0);

                onsiteAssessments += parseInt(formData.get(`${weekKey}_assessment_onsite_delivery`) || 0) +
                                     parseInt(formData.get(`${weekKey}_assessment_onsite_preparation`) || 0);
                onlineAssessments += parseInt(formData.get(`${weekKey}_assessment_online_delivery`) || 0) +
                                     parseInt(formData.get(`${weekKey}_assessment_online_preparation`) || 0);
            }

            // Include Exam Week manually
            onsiteMaterials += parseInt(formData.get('examweek_materials_onsite_delivery') || 0) +
                               parseInt(formData.get('examweek_materials_onsite_preparation') || 0);
            onlineMaterials += parseInt(formData.get('examweek_materials_online_delivery') || 0) +
                               parseInt(formData.get('examweek_materials_online_preparation') || 0);

            onsiteActivities += parseInt(formData.get('examweek_activities_onsite_delivery') || 0) +
                                parseInt(formData.get('examweek_activities_onsite_preparation') || 0);
            onlineActivities += parseInt(formData.get('examweek_activities_online_delivery') || 0) +
                                parseInt(formData.get('examweek_activities_online_preparation') || 0);

            onsiteAssessments += parseInt(formData.get('examweek_assessment_onsite_delivery') || 0) +
                                 parseInt(formData.get('examweek_assessment_onsite_preparation') || 0);
            onlineAssessments += parseInt(formData.get('examweek_assessment_online_delivery') || 0) +
                                 parseInt(formData.get('examweek_assessment_online_preparation') || 0);

            // Calculate totals
            const totalMaterials = onsiteMaterials + onlineMaterials;
            const totalActivities = onsiteActivities + onlineActivities;
            const totalAssessments = onsiteAssessments + onlineAssessments;

            const totalSLT = totalMaterials + totalActivities + totalAssessments;
            const totalPTG = onlineMaterials + onlineActivities + onlineAssessments;

            // Calculate percentages safely
            const ptgPercentage = totalSLT > 0 ? ((totalPTG / totalSLT) * 100).toFixed(2) : 0;
            const onlineMaterialsPercentage = totalPTG > 0 ? ((onlineMaterials / totalPTG) * 100).toFixed(2) : 0;
            const onlineActivitiesPercentage = totalPTG > 0 ? ((onlineActivities / totalPTG) * 100).toFixed(2) : 0;
            const onlineAssessmentsPercentage = totalPTG > 0 ? ((onlineAssessments / totalPTG) * 100).toFixed(2) : 0;

            // Get course info
            const courseInfo = formData.get('course-info') || "Not Provided";

            // Update table with calculated values
            document.getElementById('onsite-materials').textContent = onsiteMaterials;
            document.getElementById('online-materials').textContent = onlineMaterials;
            document.getElementById('total-materials').textContent = totalMaterials;

            document.getElementById('onsite-activities').textContent = onsiteActivities;
            document.getElementById('online-activities').textContent = onlineActivities;
            document.getElementById('total-activities').textContent = totalActivities;

            document.getElementById('onsite-assessments').textContent = onsiteAssessments;
            document.getElementById('online-assessments').textContent = onlineAssessments;
            document.getElementById('total-assessments').textContent = totalAssessments;

            // Display summary
            document.getElementById('totals').innerHTML = `
                <div class="summary-card">
                    <div class="summary-title">Course Overview</div>
                    <div class="summary-content">
                        <strong>Course Code and Title:</strong> ${courseInfo}<br><br>
                        <strong>Total SLT:</strong> ${totalSLT} hours<br>
                        <strong>Total PTG:</strong> ${totalPTG} hours<br>
                        <strong>% PTG:</strong> ${ptgPercentage}%<br>
                        <strong>% Online Learning Materials:</strong> ${onlineMaterialsPercentage}%<br>
                        <strong>% Online Learning Activities:</strong> ${onlineActivitiesPercentage}%<br>
                        <strong>% Online Assessments:</strong> ${onlineAssessmentsPercentage}%
                    </div>
                </div>
            `;
        });
    </script>

<button id="download-csv" class="submit-btn">Download as CSV</button>

    <footer style="text-align: center; margin-top: 24px; font-size: 18px; color: blue;">
        Betul.... Ini Rohayati Paidi yang buat. 😊
    </footer>

<script>
document.getElementById('download-csv').addEventListener('click', function () {
    // Select the table
    const table = document.querySelector('table');

    // Initialize CSV content
    let csv = "";

    // Process headers (first row of the table)
    const headers = table.querySelectorAll('thead th'); // Select header cells
    const headerRow = Array.from(headers).map(header => `"${header.innerText.trim()}"`).join(",");
    csv += headerRow + "\n"; // Add header row to CSV

    // Process table rows
    const rows = table.querySelectorAll('tbody tr');
    rows.forEach(row => {
        const cols = row.querySelectorAll('td');
        const rowData = Array.from(cols).map(col => {
            // Check for multiple inputs in a single <td>
            const inputs = col.querySelectorAll('input');
            if (inputs.length > 0) {
                return Array.from(inputs).map(input => input.value || '').join(","); // Concatenate all input values
            } else {
                return `"${col.innerText.trim()}"`; // Use the visible text
            }
        }).join(","); // Join all columns
        csv += rowData + "\n"; // Add row to CSV
    });

    // Create a downloadable blob
    const blob = new Blob([csv], { type: 'text/csv' });
    const url = URL.createObjectURL(blob);

    // Create a temporary download link
    const a = document.createElement('a');
    a.href = url;
    a.download = "table_data.csv"; // File name
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
});
</script>

</body>
</html>
